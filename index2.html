	<!doctype html> 
<html lang="en">
	<head>

		<meta name="msapplication-TileColor" content="#da532c">
		<meta name="theme-color" content="#ffffff">		
		
		<meta name="msapplication-TileColor" content="#da532c">
		<meta name="theme-color" content="#ffffff">
		<meta charset="utf-8">
		<meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="css/style.css">
		<link rel="stylesheet" href="css/splide.min.css">
		<script src="js/jquery-3.3.1.min.js"></script>
		<script src="js/jquery-migrate-3.0.1.min.js"></script>


		<script> <!-- start test if touch device -->	
		function is_touch_device() {  
		try {  
		 document.createEvent("TouchEvent");  
		 return true;  
		} catch (e) {  
		 return false;  
		}
		}
		</script>		
		
		<!-- xr-auto & config-auto resize & texts -->
		<script>
				
		var xr_resize = function() {
			var this_iframe;
			//var this_iframe_is = $('.xr-auto');
			var this_container_width;
			var aspect_ratio;
			var this_src;
			var this_data_src;
			
			$('.xr-auto, .config-auto').each(function() {
				var this_iframe = $(this);
				var extra_space = '0';
				this_src = $(this).attr('src');
				this_data_src = $(this).attr('data-src');
				
				if (this_src =='akg/xr/akgxr.html' || this_data_src =='akg/xr/akgxr.html' || this_src == 'akg/web/keyshot-configurator.html' || this_data_src == 'akg/web/keyshot-configurator.html') {
				aspect_ratio = 899 / 829;
				}
				else if (this_src == 'Converse/xr/conversexr.html' || this_data_src == 'Converse/xr/conversexr.html' || this_src == 'Converse/web/keyshot-configurator.html' || this_data_src == 'Converse/web/keyshot-configurator.html') {
				aspect_ratio = 800 / 1919;
				}
				else if (this_src == 'poc/xr/pocxr.html' || this_data_src == 'poc/xr/pocxr.html') {
				aspect_ratio = 1080 / 1920;
				}
				else if (this_src == 'Bagheera/xr/bagheeraxr.html' || this_data_src == 'Bagheera/xr/bagheeraxr.html') {
				aspect_ratio = 890 / 1583;
				}
				else if (this_src == 'haglofs/xr/haglofs.html' || this_data_src == 'haglofs/xr/haglofs.html') {
				aspect_ratio = 440 / 1600;
				}
				else if (this_src == 'alcon/xr/alconxr.html' || this_data_src == 'alcon/xr/alconxr.html') {
				aspect_ratio = 800 / 815;
				}
				else if (this_src == 'Specialized/xr/specializedxr.html' || this_data_src == 'Specialized/xr/specializedxr.html') {
				aspect_ratio = 829 / 799;
				}
				else {
				//alert('xr error');
				}
				
				if (this_iframe.hasClass('config-auto')) {
				extra_space = 40;
				}
				
			 if (window.matchMedia("(max-width: 565px)").matches) {
				var this_container_width = this_iframe.closest('div').width();	
			  this_iframe.css({'height': this_container_width * aspect_ratio + extra_space,'width': this_container_width,'max-height': '100%', 'max-width': '100%'})
			 } else if (window.matchMedia("(min-width: 566px) and (max-width: 767px)").matches) {
				var this_container_width = this_iframe.closest('div').width();	
			  this_iframe.css({'height': this_container_width * aspect_ratio + extra_space,'width': this_container_width,'max-height': '100%', 'max-width': '100%'})
			 } else if (window.matchMedia("(min-width: 768px) and (max-width: 991px)").matches) {
				var this_container_width = this_iframe.closest('div').width();	
			  this_iframe.css({'height': this_container_width * aspect_ratio,'width': this_container_width,'max-height': '100%', 'max-width': '100%'})
			 } else if (window.matchMedia("(min-width: 992px)").matches) {
				var this_container_width = this_iframe.closest('div').width();	
			  this_iframe.css({'height': this_container_width * aspect_ratio,'width': this_container_width,'max-height': '100%', 'max-width': '100%'})
			 }
			 });	
		}

		$(document).ready(function() {  
			xr_resize();
		});

		$(window).on('resize', function(){    							
			xr_resize();	
		}).resize()// trigger on page load
		</script>			
	</head>	
	<body> 
		<script> console.log('clean')</script>

	<div class="akg-splide portfolio-section  dark-theme splide-slider">
		<div class="section-logo akg-logo dark-theme bg-none hw100"></div>
		<div class="splide__track">
			<ul class="splide__list">
				<div class="splide__slide full item dark-theme bg-none w100 ignore">		
					<p>1</p>		
				</div>
				<div class="splide__slide full item dark-theme bg-none w100 ignore">		
					<p>2</p>							
				</div>
				<div class="splide__slide full item dark-theme bg-none w100 ignore">				
					<p>3</p>							
				</div>
				<div class="splide__slide full item dark-theme bg-none w100 ignore">				
					<p>4</p>							
				</div>
				<div class="splide__slide" style="width:75vh">
					<img class="cover flipx" data-splide-lazy="akg/images/gallery/sketch.jpg">
				</div>								
			</ul>
		</div>
		<div class="my-slider-progress">
			<div class="my-slider-progress-bar"></div>
		</div>					  
	</div>					


		<script src="js/splide.min.js"></script>
		<script src="js/splide-autoscroll.js"></script>

		

		<!-- splide -->
		<script>
		
		var funcs = [];
		var splides = document.querySelectorAll('.splide-slider');
		
		for (let i = 0; i < splides.length; i++) {

		  funcs[i] = function() {
			let splideElement = splides[i];
			var splideClassname = splideElement.classList[0];	
			  
		   var splideDefaultOptions = 
		  {
			lazyLoad: 'nearby',
			preloadPages: 0,
			autoWidth: true,
			rewind: true,
			//wheel: true,
			drag: 'free',
			arrows: true,
			pagination: false,
			waitForTransition: false,
			//perPage: 1,
			breakpoints: {
				575: {
					pagination: true,
				},
			}			
		  }
				  
			var splide = new Splide( splideElement, splideDefaultOptions );
			
			splide.on( 'mounted move', function () {
			var getBar = '.'+ splideClassname + ' .my-slider-progress-bar';
			var bar = splide.root.querySelector(getBar);	
			var end = splide.Components.Controller.getEnd() + 1;
			bar.style.width = String( 100 * ( splide.index + 1 ) / end ) + '%';
			});

			
			var lastVisited = 0; //start index
			splide.on( 'moved', function () {
			
			var splideId = $('#'+splide.root.id);			
			var thisIndex = splide.index;		
			var lastVisited = splide.Components.Controller.getIndex( true );		
			
			console.log(splide.Components.Elements.root.classList[0], splide.index, 'last visited index is: ', lastVisited);

			if (thisIndex > lastVisited) {
			splideId.find('.splide__slide').removeClass('last-visited');
			splideId.find('.is-prev').addClass('last-visited');			
			}
			else {
			splideId.find('.splide__slide').removeClass('last-visited');
			splideId.find('.is-next').addClass('last-visited');			
			}
					
			lastVisited = thisIndex;
			var thisIframe = splideId.find('.is-active').find('iframe');
			if (thisIframe.hasClass('unloaded')) {
			var thisDataSplideSrc = thisIframe.attr('data-splide-lazy');
			console.log(thisDataSplideSrc);
			thisIframe.attr('src',thisDataSplideSrc).removeClass('unloaded').addClass('unload');
			}	
					
			else if (splideId.find('.last-visited').find('iframe').hasClass('unload')) {			
			var thisSrc = splideId.find('.last-visited').find('iframe').attr('src');
			console.log('last slide has class unload and its src is: ', thisSrc);
			splideId.find('.last-visited').find('iframe').attr('src','').attr('data-splide-lazy', thisSrc).removeClass('unload').addClass('unloaded');
			}	
			});
					
		   splide.mount();

		  };
		}
		for (var j = 0; j < splides.length; j++) {
		  funcs[j]();
		}


			/* menu splide control */
			let aboutSplide = new Splide( '.about-splide', {
			arrows: false,
			pagination: false,
			} );				
			aboutSplide.on( 'mounted', function () {
				$('.about-splide .more-btn-text').on('click',function(){
					aboutSplide.go('+${i}');			
				});
				$('.go-to-about').on('click',function(){
					aboutSplide.go(0);			
				});
				$('.go-to-services').on('click',function(){
					aboutSplide.go(2);
				});			
			} );
			aboutSplide.mount();		

		<!-- reviews splide slider -->
		if(is_touch_device()) {
			let reviewsSplide = new Splide( '.reviews-splide', {
			type: 'loop',			
			autoplay: true,
			pauseOnHover: true,
			interval: 2000,
			arrows: false,
			pagination: false,
		   perPage: 3,
			breakpoints: {
				575: {
					perPage: 1,
				},
				768: {
					perPage: 2,
				},
			}
			});				

			reviewsSplide.mount(	);	
		}		
		else {
			let reviewsSplide = new Splide( '.reviews-splide', {
			type: 'loop',			
			//autoplay: true,
			pauseOnHover: true,
			interval: 2000,
			arrows: false,
			pagination: false,
		   perPage: 3,
			breakpoints: {
				575: {
					perPage: 1,
				},
				768: {
					perPage: 2,
				},
			}
			});				

			reviewsSplide.mount(window.splide.Extensions);
		}	

					
		</script>
		

	</body>
</html>	