	<!doctype html> 
<html lang="en">
	<head>

		<meta name="msapplication-TileColor" content="#da532c">
		<meta name="theme-color" content="#ffffff">		
		
		<meta name="msapplication-TileColor" content="#da532c">
		<meta name="theme-color" content="#ffffff">
		<meta charset="utf-8">
		<meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="css/style.css">
		<link rel="stylesheet" href="css/splide.min.css">
		<script src="js/jquery-3.3.1.min.js"></script>
		<script src="js/jquery-migrate-3.0.1.min.js"></script>

			
	</head>	
	<body> 
		<script> console.log('full splide script + 5 splides')</script>

	<div class="akg-splide portfolio-section  dark-theme splide-slider">
		<div class="section-logo akg-logo dark-theme bg-none hw100"></div>
		<div class="splide__track">
			<ul class="splide__list">
				<div class="splide__slide full item dark-theme bg-none w100 ignore">		
					<p>1</p>		
				</div>
							<div class="splide__slide full item x-theme bg-none">
								<div class="container-xl-up row m0 hw100 relative mr-auto ml-auto">						
									<div class="col-lg-4 ml-auto mb-5-md-down c-all xs-down-h">
										<div class="txt-l">
											<span class="d-block text-uppercase">Product Design</span>
											<h2 class="s-t">AKG <strong>Over-ear Headphones</strong></h2>
											<p> Headphones for Vienna based audio products company AKG. <br>
											Retro styled light-weight and easy to handle headphones with focus on comfort.<br> <strong>Swipe product to rotate</strong>
											</p>
											<p><a href="https://www.akg.com/" target="_blank" title="Visit AKG" class="btn btn-outline">Visit</a></p>
										</div>
									</div>
									<div class="col-lg-7 col-md-12 col-sm col-xs-12 textoverlay-desktop" style="text-align:center;">
										<iframe 
										class="lazy soft-zoom" 
										data-src="akg/xr/akgxr.html"																			
										frameborder="0"
										scrolling="no"
										>
										</iframe>						
									</div>			
								</div>
							</div>				
							<div class="splide__slide item" style="width:75vh">
								<img class="cover flipx" data-splide-lazy="akg/images/gallery/sketch.jpg">
							</div>
							<div class="splide__slide item row m0" style="width: 75vh !important;">
								<img class="cover" data-splide-lazy="akg/images/gallery/sketch.jpg" >
							</div>
							<div class="splide__slide item max-vw100" style="width: calc(75vh * (152 / 150)) !important;">
								<img class="" data-splide-lazy="akg/images/functions.svg">
							</div>
							<div class="splide__slide item max-vw100" style="width: 75vh !important;">
								<img class="cover" data-splide-lazy="akg/images/functions2.svg">
							</div>								
				<div class="splide__slide full item dark-theme bg-none w100 ignore">		
					<p>2</p>							
				</div>
				<div class="splide__slide full item dark-theme bg-none w100 ignore">				
					<p>3</p>							
				</div>
				<div class="splide__slide full item dark-theme bg-none w100 ignore">				
					<p>4</p>							
				</div>
				<div class="splide__slide" style="width:75vh">
					<img class="cover" data-splide-lazy="akg/images/gallery/sketch.jpg">
				</div>								
			</ul>
		</div>
		<div class="my-slider-progress">
			<div class="my-slider-progress-bar"></div>
		</div>					  
	</div>					


		<script src="js/splide.min.js"></script>
		<!-- <script src="js/splide-autoscroll.js"></script> -->

		<!-- splide -->
		<script>
		
			var funcs = [];
			var splides = document.querySelectorAll('.splide-slider');
			
			for (let i = 0; i < splides.length; i++) {

			  funcs[i] = function() {
				let splideElement = splides[i];
				var splideClassname = splideElement.classList[0];	
				  
				var splideDefaultOptions = 
			  {
				lazyLoad: 'nearby',
				preloadPages: 0,
				autoWidth: true,
				rewind: true,
				//wheel: true,
				drag: 'free',
				arrows: true,
				pagination: false,
				waitForTransition: false,
				//perPage: 1,
				breakpoints: {
					575: {
						pagination: true,
					},
				}			
			  }
					  
				var splide = new Splide( splideElement, splideDefaultOptions );
				
				splide.on( 'mounted move', function () {
				var getBar = '.'+ splideClassname + ' .my-slider-progress-bar';
				var bar = splide.root.querySelector(getBar);	
				var end = splide.Components.Controller.getEnd() + 1;
				bar.style.width = String( 100 * ( splide.index + 1 ) / end ) + '%';
				});

				
				var lastVisited = 0; //start index
				splide.on( 'moved', function () {
				
				var splideId = $('#'+splide.root.id);			
				var thisIndex = splide.index;		
				var lastVisited = splide.Components.Controller.getIndex( true );		
				
				console.log(splide.Components.Elements.root.classList[0], splide.index, 'last visited index is: ', lastVisited);

				if (thisIndex > lastVisited) {
				splideId.find('.splide__slide').removeClass('last-visited');
				splideId.find('.is-prev').addClass('last-visited');			
				}
				else {
				splideId.find('.splide__slide').removeClass('last-visited');
				splideId.find('.is-next').addClass('last-visited');			
				}
						
				lastVisited = thisIndex;
				var thisIframe = splideId.find('.is-active').find('iframe');
				if (thisIframe.hasClass('unloaded')) {
				var thisDataSplideSrc = thisIframe.attr('data-splide-lazy');
				console.log(thisDataSplideSrc);
				thisIframe.attr('src',thisDataSplideSrc).removeClass('unloaded').addClass('unload');
				}	
						
				else if (splideId.find('.last-visited').find('iframe').hasClass('unload')) {			
				var thisSrc = splideId.find('.last-visited').find('iframe').attr('src');
				console.log('last slide has class unload and its src is: ', thisSrc);
				splideId.find('.last-visited').find('iframe').attr('src','').attr('data-splide-lazy', thisSrc).removeClass('unload').addClass('unloaded');
				}	
				});
						
				splide.mount();

			  };
			}
			for (var j = 0; j < splides.length; j++) {
			  funcs[j]();
			}


				/* menu splide control */
				let aboutSplide = new Splide( '.about-splide', {
				arrows: false,
				pagination: false,
				} );				
				aboutSplide.on( 'mounted', function () {
					$('.about-splide .more-btn-text').on('click',function(){
						aboutSplide.go('+${i}');			
					});
					$('.go-to-about').on('click',function(){
						aboutSplide.go(0);			
					});
					$('.go-to-services').on('click',function(){
						aboutSplide.go(2);
					});			
				} );
				aboutSplide.mount();		

			<!-- reviews splide slider -->
			if(is_touch_device()) {
				let reviewsSplide = new Splide( '.reviews-splide', {
				type: 'loop',			
				autoplay: true,
				pauseOnHover: true,
				interval: 2000,
				arrows: false,
				pagination: false,
				perPage: 3,
				breakpoints: {
					575: {
						perPage: 1,
					},
					768: {
						perPage: 2,
					},
				}
				});				

				reviewsSplide.mount(	);	
			}		
			else {
				let reviewsSplide = new Splide( '.reviews-splide', {
				type: 'loop',			
				//autoplay: true,
				pauseOnHover: true,
				interval: 2000,
				arrows: false,
				pagination: false,
				perPage: 3,
				breakpoints: {
					575: {
						perPage: 1,
					},
					768: {
						perPage: 2,
					},
				}
				});				

				reviewsSplide.mount(window.splide.Extensions);
			}	

						
		</script>
	</body>
</html>	