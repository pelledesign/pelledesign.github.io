	<!doctype html> 
<html lang="en">
	<head>
		<title> Pelle iDesign</title>  
		<link rel="icon" type="image/svg+xml" href="images/favicon/favicon.svg">
		<link rel="apple-touch-icon" sizes="180x180" href="images/favicon/apple-touch-icon.png">
		<link rel="icon" type="image/png" sizes="32x32" href="images/favicon/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="16x16" href="images/favicon/favicon-16x16.png">
		<link rel="manifest" href="/site.webmanifest">
		<link rel="mask-icon" href="images/favicon/safari-pinned-tab.svg" color="#5bbad5">
		<meta name="msapplication-TileColor" content="#da532c">
		<meta name="theme-color" content="#ffffff">		
		
		<meta name="msapplication-TileColor" content="#da532c">
		<meta name="theme-color" content="#ffffff">
		<meta charset="utf-8">
		<meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
	  
		<link rel="stylesheet" href="css/raleway2.css">		 
		<link rel="stylesheet" href="css/style.css">
		<link rel="stylesheet" href="css/magnific.css">
		<link rel="stylesheet" href="css/load-more-button.css">	
		<link rel="stylesheet" href="fonts/ionicons/css/ionicons.min.css">	
		<link rel="stylesheet" href="css/splide.min.css">
		<link rel="stylesheet" href="css/keen-slider.css">
		<script src="js/jquery-3.3.1.min.js"></script>
		<script src="js/jquery-migrate-3.0.1.min.js"></script>

		<script> <!-- start test if touch device -->	
		function is_touch_device() {  
		try {  
		 document.createEvent("TouchEvent");  
		 return true;  
		} catch (e) {  
		 return false;  
		}
		}
		</script>		

			
	</head>	
	<body> 
	<script> console.log('fixed lazy + remoed exra scripts') </script>
    <div id="converse" class="keen-slider pop-theme" style="max-width: 100vw; height:75vh; overflow:visible">
		 <div class="section-logo converse-logo dark-theme bg-none hw100" style="height:75%; opacity:0.04"></div>		 
			<div id="xr" class="keen-slider__slide" style="min-width: 100%; max-width: 100%">
				<div class="row m0 hw100 relative">						
					<div class="col-lg-4 ml-auto c-all">
						<div class="text-box">
							<h2 class="mb-4 s-t" style="color:#8d2720">Converse <strong>Suburban</strong></h2>
							<p>Spherical shades designed with industry standard methods for optics and with accurate anatomical measurements.<br>
							</p>		  
							<p>My task was to analyze the brand's form language and create a product not already in the their arsenal, using southern suburban U.S as a contrasting theme to Converse's expression.		  
							</p>
							<p><strong>Swipe Model to Rotate</strong></p>
						</div>
					</div>
					<div class="col-lg-8 col-md-12 col-sm">
						<iframe 
						class="lazy soft-zoom" 
						data-src="Converse/xr/conversexr.html"																			
						frameborder="0"
						scrolling="no"
						>
						</iframe>						
					</div>			
				</div>
			</div>
			<div id="transpsketch" class="keen-slider__slide multiply" style="min-width: 100%; max-width: 100%">
				<img data-src="Converse/images/process/sketch01.jpg" class="lazy cover" style="">
			</div>
			<div class="keen-slider__slide multiply" style="min-width: 100%; max-width: 100%">
				<iframe 
				data-src="Converse/webgl/measurements.html"
				class="lazy unload multiply"																																						
				frameborder="0"
				scrolling="no">			 	 
				</iframe>
			</div>			
			<div id="whitebg" class="keen-slider__slide multiply" style="min-width: 75vh; max-width: 75vh;">
				<img data-src="akg/images/gallery/sketch_white.jpg" class="lazy cover" style="">
			</div>	
			<div id="dd" class="keen-slider__slide" style="min-width: 100%; max-width: 100%">
				<img data-src="Converse/images/process/sketch01.jpg" class="lazy cover" style="">
			</div>
			<div class="my-slider-progress">
				<div class="my-slider-progress-bar"></div>
			</div>			
	</div>

<!-- 	<div id="ffff" class="keen-slider pop-theme" style="max-width: 100vw; height:75vh;  overflow:visible">
		 <div class="section-logo converse-logo dark-theme bg-none hw100" style="height:75%; opacity:0.3"></div>
		 
			<div class="keen-slider__slide" style="min-width: 100%; max-width: 100%">
				<div class="row m0 hw100 relative">						
					<div class="col-lg-4 ml-auto c-all">
						<div class="text-box">
							<h2 class="mb-4 s-t" style="color:#8d2720">Converse <strong>Suburban</strong></h2>
							<p>Spherical shades designed with industry standard methods for optics and with accurate anatomical measurements.<br>
							</p>		  
							<p>My task was to analyze the brand's form language and create a product not already in the their arsenal, using southern suburban U.S as a contrasting theme to Converse's expression.		  
							</p>
							<p><strong>Swipe Model to Rotate</strong></p>
						</div>
					</div>
					<div class="col-lg-8 col-md-12 col-sm">
						<iframe 
						class="lazy soft-zoom unload" 
						data-src="Converse/xr/conversexr.html"																			
						frameborder="0"
						scrolling="no"
						>
						</iframe>						
					</div>			
				</div>
			</div>
			<div class="keen-slider__slide multiply" style="min-width: 100%; max-width: 100%">
				<img data-src="Converse/images/process/sketch01.jpg" class="lazy cover" style="">
			</div>
			<div class="keen-slider__slide multiply" style="min-width: 75vh; max-width: 75vh;">
				<img data-src="akg/images/gallery/sketch_white.jpg" class="lazy cover" style="">
			</div>
			<div class="keen-slider__slide" style="min-width: 100%; max-width: 100%">
				<img data-src="Converse/images/process/sketch01.jpg" class="lazy cover" style="">
			</div>	
			<div class="my-slider-progress">
				<div class="my-slider-progress-bar"></div>
			</div>			
			
	</div> -->
	<div id="spacer" class="keen-slider pop-theme" style="max-width: 100vw; height:75vh;">					
	</div>

	
		<!-- loader -->
		<div id="loader" class="show fullscreen"><svg class="circular" width="48px" height="48px">
		  <circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee" />
		  <circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10"
			 /></svg></div> 

		<!-- loader -->
		<script>
		  // loader
		  var loader = function() {
			 setTimeout(function() { 
				if($('#loader').length > 0) {
				  //$('#loader').removeClass('show');
				  $('#loader').remove();
				}
			 }, 1);
		  };
		  loader();		
		</script>

		<!-- remove stuff -->
		<script>
		if(is_touch_device()) {
		$('.touch-remove').remove();
		}
		else {
		$('.desktop-remove').remove();
		}
		</script>

		<!-- up button -->
		<button onclick="topFunction()" id="myBtn" title="Go to top"><div class="ion-android-arrow-dropup-circle md-down-h"></div></button>
		
		<!-- loading icon  --> 		
		<script>		
		$('img, iframe').addClass("loader").not('.zoom-icon');			
		$('img, iframe').on('load',function(){
		$(this).closest('.loader').removeClass('loader').addClass('hw100 loader-removed'); 
		});		
		</script>
				
		<!-- write scripts for mobile / desktop -->
		<script>
		if(is_touch_device()) {

		document.write('<script src="js/lazyload.js"><\/script>');
		document.write('<script src="js/logos.js"><\/script>');
		document.write('<script src="js/bootstrap.min.js"><\/script>');
		document.write('<script src="js/magnific.js"><\/script>');
		document.write('<script src="js/load-more-button.js"><\/script>');
		document.write('<script src="js/smoothscroll.js"><\/script>');
		document.write('<script src="js/isInViewport.js"><\/script>');
		<!-- document.write('<script src="js/splide.min.js"><\/script>'); -->
		document.write('<script src="js/keen-slider.js"><\/script>');
		}
		else {
		document.write('<script src="js/lazyload.js"><\/script>');
		document.write('<script src="js/logos.js"><\/script>');
		document.write('<script src="js/bootstrap.min.js"><\/script>');
		document.write('<script src="js/magnific.js"><\/script>');
		document.write('<script src="js/jquery.mousewheel.js"><\/script>');
		document.write('<script src="js/load-more-button.js"><\/script>');
		document.write('<script src="js/jquery-scroll-snap.js"><\/script>');
		document.write('<script src="js/isInViewport.js"><\/script>');
		document.write('<script src="js/splide.min.js"><\/script>');
		document.write('<script src="js/splide-autoscroll.js"><\/script>');
		document.write('<script src="js/keen-slider.js"><\/script>');
		<!-- document.write('<script src="js/jquery.mousewheel.min.js"><\/script>'); -->
		}
		</script>


		
		<!-- keen slider -->
		<script>

		<!-- navigation -->
		function navigation(slider) {
		  let wrapper, dots, arrowLeft, arrowRight

		  function markup(remove) {
			 wrapperMarkup(remove)
			 dotMarkup(remove)
			 arrowMarkup(remove)
		  }

		  function removeElement(elment) {
			 elment.parentNode.removeChild(elment)
		  }
		  function createDiv(className) {
			 var div = document.createElement("div")
			 var classNames = className.split(" ")
			 classNames.forEach((name) => div.classList.add(name))
			 return div
		  }

		  function arrowMarkup(remove) {
			 if (remove) {
				removeElement(arrowLeft)
				removeElement(arrowRight)
				return
			 }
			 arrowLeft = createDiv("arrow arrow--left")
			 arrowLeft.addEventListener("click", () => slider.prev())
			 arrowRight = createDiv("arrow arrow--right")
			 arrowRight.addEventListener("click", () => slider.next())

			 wrapper.appendChild(arrowLeft)
			 wrapper.appendChild(arrowRight)
		  }

		  function wrapperMarkup(remove) {
			 if (remove) {
				var parent = wrapper.parentNode
				while (wrapper.firstChild)
				  parent.insertBefore(wrapper.firstChild, wrapper)
				removeElement(wrapper)
				return
			 }
			 wrapper = createDiv("navigation-wrapper")
			 slider.container.parentNode.appendChild(wrapper)
			 wrapper.appendChild(slider.container)
		  }

		  function dotMarkup(remove) {
			 if (remove) {
				removeElement(dots)
				return
			 }
			 dots = createDiv("dots")
			 slider.track.details.slides.forEach((_e, idx) => {
				var dot = createDiv("dot")
				dot.addEventListener("click", () => slider.moveToIdx(idx))
				dots.appendChild(dot)
			 })
			 wrapper.appendChild(dots)
		  }

		  function updateClasses() {
			 var slide = slider.track.details.rel
			 slide === 0
				? arrowLeft.classList.add("arrow--disabled")
				: arrowLeft.classList.remove("arrow--disabled")
			 slide === slider.track.details.slides.length - 1
				? arrowRight.classList.add("arrow--disabled")
				: arrowRight.classList.remove("arrow--disabled")
			 Array.from(dots.children).forEach(function (dot, idx) {
				idx === slide
				  ? dot.classList.add("dot--active")
				  : dot.classList.remove("dot--active")
			 })
		  }

			
			var initBar = function (){
			var thisSlider = $(slider.container);
			var getBar = thisSlider.find('.my-slider-progress-bar');
			var end = slider.track.details.maxIdx;
			var sliderIndex = slider.track.details.rel + 1;
			var barWidth = (sliderIndex / end) * 100;
			getBar.css({'width': barWidth + '%'})
			}

			var lastIndex = '0'

			var unloadIframe = function (){
			var thisSlide = $(slider.slides[slider.track.details.rel]);
			var upcomingSlideIndex = slider.animator.targetIdx;	
			//var thisSlideIndex = slider.track.details.rel;
			console.log('going to: ',upcomingSlideIndex, 'last slide was: ',lastIndex);
			var lastSlide = $(slider.slides[lastIndex]);
			//console.log('last slide was: ',lastSlide);
			
			if (lastSlide.find('iframe').hasClass('unload')) {
			console.log('last slide got iframe');		
			var thisSrc = lastSlide.find('iframe').attr('src');
			console.log('last slide has class unload and its src is: ', thisSrc);
			lastSlide.find('iframe').attr('src','').attr('data-src', thisSrc).removeClass('unload').addClass('unloaded');			
			}
			else {		
			console.log('last slide got no iframe');
			}
			lastIndex = upcomingSlideIndex;

			
			if (thisSlide.find('iframe').hasClass('unloaded')) {
			console.log('got class unloaded');
			console.log(thisSlide);			
			var dataSrc = thisSlide.find('iframe').attr('data-src');
			console.log(dataSrc);
			thisSlide.find('iframe').attr('src',dataSrc).removeClass('unloaded').addClass('unload');	
			//var thisDataSplideSrc = thisIframe.attr('data-splide-lazy');
			//console.log(thisDataSplideSrc);
			//thisIframe.attr('src',thisDataSplideSrc).removeClass('unloaded').addClass('unload');		
			}			
		}			

		  slider.on("created", () => {
			 markup()
			 updateClasses()
			 console.log('');
			 initBar();
		  })
		  slider.on("optionsChanged", () => {
			 console.log(2)
			 markup(true)
			 markup()
			 updateClasses()
		  })
		  slider.on("slideChanged", () => {
			 updateClasses()
			 initBar();	  
			 unloadIframe()
		  })

		  slider.on("destroyed", () => {
			 markup(true)
		  })		  
		}

		function myscroll(slider) {
		var thisSlider = $(slider.container);
			thisSlider.on('mousewheel',  function (e) {
			//console.log('ok');
				 if (e.deltaY>0) {
					  slider.next()
				 } else {
					  slider.prev()
				 }
				 e.preventDefault();
			});
		}

		var funcs = [];
		var splides = document.querySelectorAll('.keen-slider');

		for (let i = 0; i < splides.length; i++) {

		  funcs[i] = function() {
			let splideElement = splides[i];			  				  
			var slider = new KeenSlider( splideElement , {
			  loop: false,
			  mode: "free",
			  rtl: false,
			  slides: { perView: "auto" },
			  }, [navigation, myscroll])
		  };
		}
		for (var j = 0; j < splides.length; j++) {
		  funcs[j]();
		}



		$('.arrow--left').prepend('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40" width="40" height="40"><path d="m15.5 0.932-4.3 4.38 14.5 14.6-14.5 14.5 4.3 4.4 14.6-14.6 4.4-4.3-4.4-4.4-14.6-14.6z"></path></svg>');
		$('.arrow--right').prepend('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40" width="40" height="40"><path d="m15.5 0.932-4.3 4.38 14.5 14.6-14.5 14.5 4.3 4.4 14.6-14.6 4.4-4.3-4.4-4.4-14.6-14.6z"></path></svg>');
		</script>

		
		<!-- verlok lazy load - don't use when owl carousel is used -->

		<script>
		var lazyLoadInstance = new LazyLoad({
		});
		</script>
		

		

	</body>
</html>	