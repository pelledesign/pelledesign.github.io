	<!doctype html> 
<html lang="en">
	<head>
		<title> Pelle iDesign</title>  
		<link rel="icon" type="image/svg+xml" href="images/favicon/favicon.svg">
		<link rel="apple-touch-icon" sizes="180x180" href="images/favicon/apple-touch-icon.png">
		<link rel="icon" type="image/png" sizes="32x32" href="images/favicon/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="16x16" href="images/favicon/favicon-16x16.png">
		<link rel="manifest" href="/site.webmanifest">
		<link rel="mask-icon" href="images/favicon/safari-pinned-tab.svg" color="#5bbad5">
		<meta name="msapplication-TileColor" content="#da532c">
		<meta name="theme-color" content="#ffffff">		
		
		<meta name="msapplication-TileColor" content="#da532c">
		<meta name="theme-color" content="#ffffff">
		<meta charset="utf-8">
		<meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
	  
		<link rel="stylesheet" href="css/raleway2.css">		 
		<link rel="stylesheet" href="css/style.css">
		<link rel="stylesheet" href="css/magnific.css">
		<link rel="stylesheet" href="css/load-more-button.css">	
		<link rel="stylesheet" href="fonts/ionicons/css/ionicons.min.css">	
		<link rel="stylesheet" href="css/splide.min.css">
		<link rel="stylesheet" href="css/keen-slider.css">
		<script src="js/jquery-3.3.1.min.js"></script>
		<script src="js/jquery-migrate-3.0.1.min.js"></script>

		<script> <!-- start test if touch device -->	
		function is_touch_device() {  
		try {  
		 document.createEvent("TouchEvent");  
		 return true;  
		} catch (e) {  
		 return false;  
		}
		}
		</script>		

			
	</head>	
	<body> 
    <div id="converse" class="keen-slider pop-theme" style="max-width: 100vw; height:75vh; overflow:visible">
		 <div class="section-logo converse-logo dark-theme bg-none hw100" style="height:75%; opacity:0.04"></div>		 
			<div id="xr" class="keen-slider__slide" style="min-width: 100%; max-width: 100%">
				<div class="row m0 hw100 relative">						
					<div class="col-lg-4 ml-auto c-all">
						<div class="text-box">
							<h2 class="mb-4 s-t" style="color:#8d2720">Converse <strong>Suburban</strong></h2>
							<p>Spherical shades designed with industry standard methods for optics and with accurate anatomical measurements.<br>
							</p>		  
							<p>My task was to analyze the brand's form language and create a product not already in the their arsenal, using southern suburban U.S as a contrasting theme to Converse's expression.		  
							</p>
							<p><strong>Swipe Model to Rotate</strong></p>
						</div>
					</div>
					<div class="col-lg-8 col-md-12 col-sm">
						<iframe 
						class="lazy soft-zoom" 
						data-src="Converse/xr/conversexr.html"																			
						frameborder="0"
						scrolling="no"
						>
						</iframe>						
					</div>			
				</div>
			</div>
			<div id="transpsketch" class="keen-slider__slide multiply" style="min-width: 100%; max-width: 100%">
				<img data-src="Converse/images/process/sketch01.jpg" class="lazy cover" style="">
			</div>
			<div class="keen-slider__slide multiply" style="min-width: 100%; max-width: 100%">
				<iframe 
				data-src="Converse/webgl/measurements.html"
				class="lazy unload multiply"																																						
				frameborder="0"
				scrolling="no">			 	 
				</iframe>
			</div>			
			<div id="whitebg" class="keen-slider__slide multiply" style="min-width: 75vh; max-width: 75vh;">
				<img data-src="akg/images/gallery/sketch_white.jpg" class="lazy cover" style="">
			</div>	
			<div id="dd" class="keen-slider__slide" style="min-width: 100%; max-width: 100%">
				<img data-src="Converse/images/process/sketch01.jpg" class="lazy cover" style="">
			</div>
			<div class="my-slider-progress">
				<div class="my-slider-progress-bar"></div>
			</div>			
	</div>

	<div id="ffff" class="keen-slider pop-theme" style="max-width: 100vw; height:75vh;  overflow:visible">
		 <div class="section-logo converse-logo dark-theme bg-none hw100" style="height:75%; opacity:0.3"></div>
		 
			<div class="keen-slider__slide" style="min-width: 100%; max-width: 100%">
				<div class="row m0 hw100 relative">						
					<div class="col-lg-4 ml-auto c-all">
						<div class="text-box">
							<h2 class="mb-4 s-t" style="color:#8d2720">Converse <strong>Suburban</strong></h2>
							<p>Spherical shades designed with industry standard methods for optics and with accurate anatomical measurements.<br>
							</p>		  
							<p>My task was to analyze the brand's form language and create a product not already in the their arsenal, using southern suburban U.S as a contrasting theme to Converse's expression.		  
							</p>
							<p><strong>Swipe Model to Rotate</strong></p>
						</div>
					</div>
					<div class="col-lg-8 col-md-12 col-sm">
						<iframe 
						class="lazy soft-zoom unload" 
						data-src="Converse/xr/conversexr.html"																			
						frameborder="0"
						scrolling="no"
						>
						</iframe>						
					</div>			
				</div>
			</div>
			<div class="keen-slider__slide multiply" style="min-width: 100%; max-width: 100%">
				<img data-src="Converse/images/process/sketch01.jpg" class="lazy cover" style="">
			</div>
			<div class="keen-slider__slide multiply" style="min-width: 75vh; max-width: 75vh;">
				<img data-src="akg/images/gallery/sketch_white.jpg" class="lazy cover" style="">
			</div>
			<div class="keen-slider__slide" style="min-width: 100%; max-width: 100%">
				<img data-src="Converse/images/process/sketch01.jpg" class="lazy cover" style="">
			</div>	
			<div class="my-slider-progress">
				<div class="my-slider-progress-bar"></div>
			</div>			
			
	</div>
	<div id="spacer" class="keen-slider pop-theme" style="max-width: 100vw; height:75vh;">					
	</div>


		<!-- start latest work --> 
		<div id="porfolio-gallery" class="hidden">	
			<div id="converse" class="brand-section">
				<div class="converse-splide portfolio-section pop-theme splide-slider touch-remove" style="background: rgb(249, 190, 91);">
				<div class="section-logo converse-logo dark-theme bg-none hw100" style="height:75%; opacity:0.3"></div>
				  <div class="splide__track">
						<ul class="splide__list multiply" style="">
<!-- 						<div id="slider-bg" class="c-absolute hw100" style="background:red;">
							<div class="section-logo converse-logo dark-theme bg-none hw100" style="height:75%"></div>
						</div> -->						
						<!-- <div class="section-logo converse-logo dark-theme bg-none hw100" style="height:75%;"></div> -->
							<div class="splide__slide full item row m0 light-theme c-all multiply" style="transform: translateX(0px); z-index:2; transform: translate3d(0, 0, 0);">							
								<img data-splide-lazy="Converse/images/process/sketch01.jpg" class=" cover" style="transform: translateX(0px); transform: translate3d(0, 0, 0);">											
							</div>
							<div class="splide__slide full item row m0 light-theme c-all" style="transform: translateX(0px);">							
								<img data-splide-lazy="Converse/images/process/sketch01.jpg" class=" cover " style="transform: translateX(0px);">											
							</div>	
						</ul>
				  </div>
					<div class="my-slider-progress">
						<div class="my-slider-progress-bar"></div>
					</div>	
				</div>						
			</div>						
		</div>
	
		<!-- loader -->
		<div id="loader" class="show fullscreen"><svg class="circular" width="48px" height="48px">
		  <circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee" />
		  <circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10"
			 /></svg></div> 

		<!-- loader -->
		<script>
		  // loader
		  var loader = function() {
			 setTimeout(function() { 
				if($('#loader').length > 0) {
				  //$('#loader').removeClass('show');
				  $('#loader').remove();
				}
			 }, 1);
		  };
		  loader();		
		</script>

		<!-- remove stuff -->
		<script>
		if(is_touch_device()) {
		$('.touch-remove').remove();
		}
		else {
		$('.desktop-remove').remove();
		}
		</script>

		<!-- up button -->
		<button onclick="topFunction()" id="myBtn" title="Go to top"><div class="ion-android-arrow-dropup-circle md-down-h"></div></button>
		
		<!-- loading icon  --> 		
		<script>		
		$('img, iframe').addClass("loader").not('.zoom-icon');			
		$('img, iframe').on('load',function(){
		$(this).closest('.loader').removeClass('loader').addClass('hw100 loader-removed'); 
		});		
		</script>
	
		<!-- x-theme + theme-switcher + dropshadow -->			
		<script>
		
		//must be placed before main.js as it needs classes from x-theme to be able to execute
		
		$('.xr-auto').closest('div').prepend('<div class="xrtext"><h3 class="h3 txt-l text-xs-center mb-0"><strong>3D </strong>View</h3></div>');		
		$('.config-auto').closest('div').prepend('<div class="configtext"><h3 class="h3 txt-l text-xs-center mb-0"><strong></strong>CMF</h3></div>');		
		$('.config-auto').closest('div').prepend('<div class="configtext"><h3 class="h3 txt-l text-xs-center mb-0"><strong>CMF </strong></h3></div><a href="#akg-webconfig-popup" style="display: block; right: 0; position: absolute; top: 0;" data-tooltip="#icon-info-config-popup" class="info-icon config-open-large open-popup"><div class="ion-android-open "></div></a>');

		
		var theme;
		var this_theme; 			
		var this_bg;
		
		if(is_touch_device()) {
		theme = 'light';	
		themeElements = $('.x-theme-touch');	
		}
		else
		{ 
		theme = 'light';
		themeElements = $('.x-theme-desktop');
		}		
		
		this_theme = theme + '-theme'; 			
		this_bg = theme + 'Bg';
		
		// apply chosen theme to elements - and mark clicked button with circle			
		$('body').addClass(this_bg);
		themeElements.addClass(this_theme);
		$('.' + this_theme + '-button').addClass('circle-shadow');
		$('#hero').find('.item').addClass(this_theme);	
		$('body').find(".x-theme, .info-box, .view-btn, .my-slider-progress").addClass(this_theme);
		$('.portfolio-section, .x-shadow, .info-box').addClass(this_theme + '-shadow');		
		$('body').find(".title").not('.ignore').addClass('bg-none');
		
		
		// on theme btn click - mark this btn - if this .item has class x-theme - remove current theme - and apply new theme			
		
		//dark-theme button
		$('.light-theme-button, .dark-theme-button').on('click',function(){
		
		if ($(this).hasClass('light-theme-button')) {
		var this_theme = 'light-theme';
		var other_theme = 'dark-theme';
		var this_button = $('.light-theme-button');
		var other_button = $('.dark-theme-button');
		var this_theme_clr = 'lightBg';
		var other_theme_clr = 'darkBg';
		}
		else if ($(this).hasClass('dark-theme-button')) {
		var this_theme = 'dark-theme';
		var other_theme = 'light-theme';
		var this_button = $('.dark-theme-button');
		var other_button = $('.light-theme-button');
		var this_theme_clr = 'darkBg';
		var other_theme_clr = 'lightBg';
		}
		
		$('body').removeClass(other_theme_clr).addClass(this_theme_clr);
		other_button.removeClass('circle-shadow');
		this_button.addClass('circle-shadow');
		
		$('#hero').find('.item').removeClass(other_theme).addClass(this_theme);
		$('body').find(".x-theme, .fadeout-btm, .title, .info-box, .view-btn, .my-slider-progress").removeClass(other_theme).addClass(this_theme);
		$('body').find('.portfolio-section, .x-shadow, .info-box').removeClass(other_theme + '-shadow').addClass(this_theme + '-shadow');											
					
		$('nav').removeClass(other_theme).addClass(this_theme);	
		
		// if the active slide has x-theme class - only then change the colors of prev/next buttons
		$(".owl-item.active").each(function(){		
		  if ($(this).find('.item').hasClass('x-theme')) {				
			$(this).closest('#slider-container').find(".view-btn").not('.hide-this').removeClass(other_theme).addClass(this_theme);				
		  }
		});			
	});	
				
		</script>
				
		<!-- write scripts for mobile / desktop -->
		<script>
		if(is_touch_device()) {

		document.write('<script src="js/lazyload.js"><\/script>');
		document.write('<script src="js/logos.js"><\/script>');
		document.write('<script src="js/bootstrap.min.js"><\/script>');
		document.write('<script src="js/magnific.js"><\/script>');
		document.write('<script src="js/load-more-button.js"><\/script>');
		document.write('<script src="js/smoothscroll.js"><\/script>');
		document.write('<script src="js/isInViewport.js"><\/script>');
		<!-- document.write('<script src="js/splide.min.js"><\/script>'); -->
		<!-- document.write('<script src="js/keen-slider.js"><\/script>'); -->
		}
		else {
		document.write('<script src="js/lazyload.js"><\/script>');
		document.write('<script src="js/logos.js"><\/script>');
		document.write('<script src="js/bootstrap.min.js"><\/script>');
		document.write('<script src="js/magnific.js"><\/script>');
		document.write('<script src="js/jquery.mousewheel.js"><\/script>');
		document.write('<script src="js/load-more-button.js"><\/script>');
		document.write('<script src="js/jquery-scroll-snap.js"><\/script>');
		document.write('<script src="js/isInViewport.js"><\/script>');
		document.write('<script src="js/splide.min.js"><\/script>');
		document.write('<script src="js/splide-autoscroll.js"><\/script>');
		document.write('<script src="js/keen-slider.js"><\/script>');
		<!-- document.write('<script src="js/jquery.mousewheel.min.js"><\/script>'); -->
		}
		</script>

		<!-- fade in on splide lazyload (the only function that controls this) -->
		<script>
		$('img, iframe').each(function () {
		var el = $(this);
		
		if(el.is('[data-splide-lazy]') || el.hasClass('lazy')) {
		el.addClass('invisible');
		el.on('load',function(){
		console.log('loaded');
		el.removeClass('invisible').addClass('fadeIn element-animated'); 
		});
		}
		});	
		</script>
		
		<!-- keen slider -->
		<script>

		<!-- navigation -->
		function navigation(slider) {
		  let wrapper, dots, arrowLeft, arrowRight

		  function markup(remove) {
			 wrapperMarkup(remove)
			 dotMarkup(remove)
			 arrowMarkup(remove)
		  }

		  function removeElement(elment) {
			 elment.parentNode.removeChild(elment)
		  }
		  function createDiv(className) {
			 var div = document.createElement("div")
			 var classNames = className.split(" ")
			 classNames.forEach((name) => div.classList.add(name))
			 return div
		  }

		  function arrowMarkup(remove) {
			 if (remove) {
				removeElement(arrowLeft)
				removeElement(arrowRight)
				return
			 }
			 arrowLeft = createDiv("arrow arrow--left")
			 arrowLeft.addEventListener("click", () => slider.prev())
			 arrowRight = createDiv("arrow arrow--right")
			 arrowRight.addEventListener("click", () => slider.next())

			 wrapper.appendChild(arrowLeft)
			 wrapper.appendChild(arrowRight)
		  }

		  function wrapperMarkup(remove) {
			 if (remove) {
				var parent = wrapper.parentNode
				while (wrapper.firstChild)
				  parent.insertBefore(wrapper.firstChild, wrapper)
				removeElement(wrapper)
				return
			 }
			 wrapper = createDiv("navigation-wrapper")
			 slider.container.parentNode.appendChild(wrapper)
			 wrapper.appendChild(slider.container)
		  }

		  function dotMarkup(remove) {
			 if (remove) {
				removeElement(dots)
				return
			 }
			 dots = createDiv("dots")
			 slider.track.details.slides.forEach((_e, idx) => {
				var dot = createDiv("dot")
				dot.addEventListener("click", () => slider.moveToIdx(idx))
				dots.appendChild(dot)
			 })
			 wrapper.appendChild(dots)
		  }

		  function updateClasses() {
			 var slide = slider.track.details.rel
			 slide === 0
				? arrowLeft.classList.add("arrow--disabled")
				: arrowLeft.classList.remove("arrow--disabled")
			 slide === slider.track.details.slides.length - 1
				? arrowRight.classList.add("arrow--disabled")
				: arrowRight.classList.remove("arrow--disabled")
			 Array.from(dots.children).forEach(function (dot, idx) {
				idx === slide
				  ? dot.classList.add("dot--active")
				  : dot.classList.remove("dot--active")
			 })
		  }

			
			var initBar = function (){
			var thisSlider = $(slider.container);
			var getBar = thisSlider.find('.my-slider-progress-bar');
			var end = slider.track.details.maxIdx;
			var sliderIndex = slider.track.details.rel + 1;
			var barWidth = (sliderIndex / end) * 100;
			getBar.css({'width': barWidth + '%'})
			}

			var lastIndex = '0'

			var unloadIframe = function (){
			var thisSlide = $(slider.slides[slider.track.details.rel]);
			var upcomingSlideIndex = slider.animator.targetIdx;	
			//var thisSlideIndex = slider.track.details.rel;
			console.log('going to: ',upcomingSlideIndex, 'last slide was: ',lastIndex);
			var lastSlide = $(slider.slides[lastIndex]);
			//console.log('last slide was: ',lastSlide);
			
			if (lastSlide.find('iframe').hasClass('unload')) {
			console.log('last slide got iframe');		
			var thisSrc = lastSlide.find('iframe').attr('src');
			console.log('last slide has class unload and its src is: ', thisSrc);
			lastSlide.find('iframe').attr('src','').attr('data-src', thisSrc).removeClass('unload').addClass('unloaded');			
			}
			else {		
			console.log('last slide got no iframe');
			}
			lastIndex = upcomingSlideIndex;

			
			if (thisSlide.find('iframe').hasClass('unloaded')) {
			console.log('got class unloaded');
			console.log(thisSlide);			
			var dataSrc = thisSlide.find('iframe').attr('data-src');
			console.log(dataSrc);
			thisSlide.find('iframe').attr('src',dataSrc).removeClass('unloaded').addClass('unload');	
			//var thisDataSplideSrc = thisIframe.attr('data-splide-lazy');
			//console.log(thisDataSplideSrc);
			//thisIframe.attr('src',thisDataSplideSrc).removeClass('unloaded').addClass('unload');		
			}			
		}			

		  slider.on("created", () => {
			 markup()
			 updateClasses()
			 console.log('');
			 initBar();
		  })
		  slider.on("optionsChanged", () => {
			 console.log(2)
			 markup(true)
			 markup()
			 updateClasses()
		  })
		  slider.on("slideChanged", () => {
			 updateClasses()
			 initBar();	  
			 unloadIframe()
		  })

		  slider.on("destroyed", () => {
			 markup(true)
		  })		  
		}

		function myscroll(slider) {
		var thisSlider = $(slider.container);
			thisSlider.on('mousewheel',  function (e) {
			//console.log('ok');
				 if (e.deltaY>0) {
					  slider.next()
				 } else {
					  slider.prev()
				 }
				 e.preventDefault();
			});
		}

		var funcs = [];
		var splides = document.querySelectorAll('.keen-slider');

		for (let i = 0; i < splides.length; i++) {

		  funcs[i] = function() {
			let splideElement = splides[i];			  				  
			var slider = new KeenSlider( splideElement , {
			  loop: false,
			  mode: "free",
			  rtl: false,
			  slides: { perView: "auto" },
			  }, [navigation, myscroll])
		  };
		}
		for (var j = 0; j < splides.length; j++) {
		  funcs[j]();
		}



		$('.arrow--left').prepend('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40" width="40" height="40"><path d="m15.5 0.932-4.3 4.38 14.5 14.6-14.5 14.5 4.3 4.4 14.6-14.6 4.4-4.3-4.4-4.4-14.6-14.6z"></path></svg>');
		$('.arrow--right').prepend('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40" width="40" height="40"><path d="m15.5 0.932-4.3 4.38 14.5 14.6-14.5 14.5 4.3 4.4 14.6-14.6 4.4-4.3-4.4-4.4-14.6-14.6z"></path></svg>');
		</script>
<!--     <script>
      var slider = new KeenSlider("#my-keen-slider", {
        loop: true,
        mode: "free",
        rtl: false,
        slides: { perView: "auto" },
      })
    </script> -->
<!-- 		<script>
		
		
			var slider = new KeenSlider(
			  '#my-slider',
			  {
				 loop: true,
				 mode: "free",
				 //slides: { perView: "auto" },
				 created: () => {
					console.log('created')
				 },
			  },
			  [
				 // add plugins here
			  ]
			)
		</script> -->
		
<!-- 		<script>
		$('img, iframe').each(function () {
		var thisImg = $(this);
		thisImg.addClass('invisible');
		
		thisImg.on('load',function(){
			if(thisImg.is('[data-splide-lazy]')) {				
			console.log('loaded');
			thisImg.removeClass('invisible').addClass('fadeIn element-animated'); 
			}
			else if (thisImg.hasClass('lazy')) {
			console.log('lazy loaded');
			thisImg.removeClass('invisible').addClass('fadeIn element-animated');
			}
		});
		});			
		</script>	 -->	

		

		
		<!-- verlok lazy load - don't use when owl carousel is used -->
		<script>
		var lazyLoadInstance = new LazyLoad({
	   container: document.getElementById('items')
		});
		</script>

		<script>
		var lazyLoadInstance = new LazyLoad({
		});
		</script>
		
		<!-- zoom-icon function -->
		<script>	
		
		<!-- ion-ios-plus -->
		//$('.zoom-icon').addClass('ion-ios-search-strong');	
		
		//show zoom icon on touch / add zoom-icon 
			$('.zoomable').prepend('<div class="ion-ios-plus c-absolute"></div>');
			$('.zoomable').on('touchstart touchend mouseenter mouseleave',function(){
			$(this).find('img').toggleClass( 'opacity-05' );
			$(this).find('.ion-ios-plus').toggleClass('ion-ios-plus-color');					
			});
		<!-- zoom-icon function -->		
		$('.zoom-icon, .zoomable').on('click', function() {
			var brand ="";
			// select popup background based on background of .item 	
			if ($(this).hasClass('dark-theme')){
			var bg = '#141414';
			var theme = 'dark-theme';			
			}
			else if ($(this).hasClass('light-theme')){
			var bg = '#fff';
			var theme = 'light-theme';			
			}
			else if ($(this).hasClass('medium-theme')){
			var bg = '#e7e8e9'; 
			var theme = 'medium-theme';	
			}
			else if ($(this).hasClass('pop-theme')){
			var brand = $(this).closest('.brand-section').attr('id');
			var bg = '#e7e8e9'; 
			var theme = 'pop-theme';
	
			console.log(theme)
			}
			else {
			var bg = '#fff';		
			var theme = 'light-theme';		
			alert('no bg');
			};

			//check if image got blend-mode
			var blendmode = '';
			if($(this).closest('.item').find('img').hasClass('multiply')){
				 var blendmode = 'multiply';
			}		

			//select contain or cover depending on screen orientation 		
			if(window.innerHeight > window.innerWidth){
				 var bgsize = 'cover';
			}	 
			else {
			var bgsize = 'contain' 
			};

			//create popup
			var src = $(this).closest('.zoomable').find('img').first().attr("src");
			var modal;
			var scrollwidth = '99vh'
			function removeModal(){ modal.remove(); $('body').off('keyup.modal-close'); }
			modal = $('<div id="scroll" class='+theme+'><div class="scroll-inner" style="background: url(' + src +'); mix-blend-mode: '+blendmode+'"></div><button class="mfp-close">&#215;</button></div>').css({
			  //backgroundColor: bg,
			  backgroundSize: bgsize,
			}).addClass(brand).click(function(){
			  removeModal();
			}).appendTo('body');

			//scroll image to center position
			var imglength = $(this).next('img').width();	
			var $container = $("#scroll");
			var $img = $("#scroll div");
			var cWidth = $container.width();
			var iWidth = $img.width();
			var left = (iWidth - cWidth) / 2; 

			$container.scrollLeft(left);

			$('body').on('keyup.modal-close', function(e){
			if(e.key==='Escape'){ removeModal(); } 
			});	
			});
		</script>
		
		<!-- specific dark and light themes for desktop / touch -->
		<script>
		if(is_touch_device()) {
		$( '.dark-theme-touch' ).addClass('dark-theme');
		$( '.light-theme-touch' ).addClass('light-theme');
		$( '.medium-theme-touch' ).addClass('medium-theme');
		}		
		else {
		$( '.dark-theme-desktop' ).addClass('dark-theme');
		$( '.light-theme-desktop' ).addClass('light-theme');
		$( '.medium-theme-desktop' ).addClass('medium-theme');
		}	
		</script>	
				
		<!-- show more / less -->
		<script>

			$('.loadMoreBtn').click(function() {
			  $(this).closest( '.ShowMoreBox' ).find('.MoreText').slideToggle();
			   let this_text = $(this).text();
				if (this_text == "More")
				$(this).text("Less")
				else
				$(this).text("More");	
				
				$('#toggle_morefilter').slideToggle("fast");									  	  
			});
		</script>

		<!-- video isInViewport --> 
		<script>	

			$(window).scroll(function() {
				 clearTimeout($.data(this, 'scrollTimer'));
				 $.data(this, 'scrollTimer', setTimeout(function() {
						$('if-in-viewport').each(function(){
							 if ( $(this).is(":in-viewport") && (!$(this).hasClass('played')) ){
								  $(this)[0].play();
								  
									$(this).on('ended',function(){
									$(this).addClass('played');
									});
									
								  $(this).closest('.video-container').find('play-video').addClass('invisible');

							 } else {
								  $(this)[0].pause();
							 }
						})

				 }, 250));
			});

			//video formats browser support
			//use multiple sources as fallback
			//MP4 is technically MPEG4 Part 14
			//MP4 H.264 is supported by all major browsers						
			//desktop - chrome edge opera firefox OK 
			//mobile - 						
			//pc desktop -    chrome edge firefox opera OK
			//mobile - safari chrome edge firefox opera OK						 
		
			$(window).scroll(function() {
				 clearTimeout($.data(this, 'scrollTimer'));
				 $.data(this, 'scrollTimer', setTimeout(function() {
						$('video').each(function(){
							 if ( $(this).is(":in-viewport") && (!$(this).hasClass('played')) ){
								  $(this)[0].play();
								  
									$(this).on('ended',function(){
									$(this).addClass('played');
									});
									
								  $(this).closest('.video-container').find('play-video').addClass('invisible');

							 } else {
								  $(this)[0].pause();
							 }
						})

				 }, 250));
			});
			
			$('#play-video').on("click", function() {
			//$('#spotify-video')[0].play();
			$(this).closest('.video-container').find('video')[0].play();
			$(this).find('.next-play-circle, .next-play-text').addClass('invisible');	
			});					

			  $(document).ready(function(){
				 $('video').on('ended',function(){
					//alert('Video has ended!');
					$(this).closest('.video-container').find('.next-play-circle, .next-play-text').removeClass('invisible').addClass('fade-in');
				 });
			  });
			
		</script>
		<script>
		//open video	
		  $('.open-video').on('click',function(){
		  $('.open-video').addClass('hidden');
			$('.keyshot-video').attr('src', "https://www.youtube.com/embed/BWhIksyqksY?&autoplay=1");
			$('.keyshot-video').load(function(){ 
			$('.keyshot-video').removeClass('invisible').addClass('fadeIn element-animated');
			
			});
							
		  });
		//close video
		//see inline magnific script below	
		  
		</script>

		<!-- section proportions -->		
		<script>
		
		
		if(is_touch_device()) {
		var positioning_buttons = 'on top'; // 'on top' or leave blank for divided section
		var positioning_title = ''; // 'on top' or leave blank for divided section
		}
		else {
		var positioning_buttons = '';
		var positioning_title = '';
		}	
		//console.log(positioning_buttons);
		//console.log(positioning_title);
		if (positioning_buttons == 'on top') {
			//alert('on top');
			$('.view-btn').addClass('on-top');
		}
		if (positioning_title == 'on top') {
			//alert('on top');
			$('.title').not('.ignore').addClass('on-top');
		}

		</script>
			
		<!-- header	 -->
		<script>
		
		<!-- lock body on nav open -->	

		
		/* header */
			
			/* $('nav .dropdown').hover(function(){
				var $this = $(this);
				$this.addClass('show');
				$this.find('> a').attr('aria-expanded', true);
				$this.find('.dropdown-menu').addClass('show');
			}, function(){
				var $this = $(this);
					$this.removeClass('show');
					$this.find('> a').attr('aria-expanded', false);
					$this.find('.dropdown-menu').removeClass('show');
			}); */

		/* hide expanded menu on body and header links click*/
		$('body').on('click', ":not(header, header *)", function(){
			$('.navbar-collapse').removeClass('show');
			  if ($('.navbar-toggler').hasClass('open')) {
				  $('.navbar-toggler').removeClass('open').addClass('collapsed');
				  
			  }	
			//$('.navbar-toggler collapsed').removeClass('show');
		});

		$('header a.nav-link').on('click',  function(){
			$('.navbar-collapse').removeClass('show');
			$('.navbar-toggler').removeClass('open').addClass('collapsed');
			$('body').toggleClass('lock-scroll');
		});
		</script>

		<!-- auto hide header -->
		<script>
		$('#header, #header-mobile').addClass('auto-hide-header'); 
		
		var didScroll;
		var last_st = 0;
		var delta = 100; //def 5
		var navbarHeight = $('header').outerHeight();

		$(window).scroll(function(event){
			 didScroll = true;
		});

		setInterval(function() {
			 if (didScroll) {
				  hasScrolled();
				  didScroll = false;
			 }
		}, 250);

		function hasScrolled() {
			 var st = $(this).scrollTop();
			 
			 // Make sure they scroll more than delta
			 if(Math.abs(last_st - st) <= delta)
				  return;
			 
			 // If they scrolled down and are past the navbar, add class .nav-up. This is necessary so you never see what is "behind" the navbar.
			 if (st > last_st && st > navbarHeight){
				$('header').removeClass('nav-down').addClass('nav-up');							  
			 
			 } else {
				  if(st + $(window).height() < $(document).height()) {
						$('header').removeClass('nav-up').addClass('nav-down');
				  }	  
			 }
			 
			 last_st = st;	
		}
		</script>

		<!-- scroll snap - for body -->		
		<script>
		//alert('poc ok?2');
		// add class'snap' if NOT portrait & md-up (tablets in portrait)
		//if(!(window.innerHeight > window.innerWidth && $(window).width() > 767)){				
		//$('.portfolio-section').not('.ignore').addClass('snap');
		//}			
		
		// add class'snap' if not touch
		if(is_touch_device()) {				
		$('#about').not('.ignore').addClass('snap');
		}	
		else {
		$('.section-container, #akg .portfolio-section').not('.ignore').addClass('snap');
		}	
		
		$( '.snap' ).scrollSnap({
		  //speed: 200
		});
		
		</script>

		<!-- scroll snap  - for desktop popups -->		
		<script>
		if(!is_touch_device()) {
		$( '#spotify-process-popup .slide, #poc-process-popup .slide' ).addClass('snap-desktop');
		}			
		</script>

		<!-- fullscreen -->
		<script>
		
		$('.fullscreen').on('click', function () {

			 var docelem = document.documentElement;
			 
			  if (docelem.requestFullscreen) {
					docelem.requestFullscreen();
			  }
			  else if (docelem.mozRequestFullScreen) {
					docelem.mozRequestFullScreen();
			  }
			  else if (docelem.webkitRequestFullScreen) {
					docelem.webkitRequestFullScreen();
			  }
			  else if (docelem.msRequestFullscreen) {
					docelem.msRequestFullscreen();
			  }

		});		
		
		$('.mfp-close').on('click', function () {

		  if (document.exitFullscreen) {
				document.exitFullscreen();
		  } else if (document.webkitExitFullscreen) {
				document.webkitExitFullscreen();
		  } else if (document.mozCancelFullScreen) {
				document.mozCancelFullScreen();
		  } else if (document.msExitFullscreen) {
				document.msExitFullscreen();
		  }

		});
		</script>
		
		<!-- buttons & icons-->
		<script>
									
		//add textoverlay icon
		if(is_touch_device()) {		
		//$('.owl-carousel, #poc, #process-md-down').find('.textoverlay:not(.no-more-icon), .textoverlay-mobile:not(.no-more-icon)').not('.textoverlay.no-more-icon').prepend('<div class="ion-android-add big more-icon"></div>');
		//$('.owl-carousel, #poc, #process-md-down').find('.textoverlay').prepend('<div class="ion-android-add more-icon"></div>');
		//$('.more-btn').addClass('ion-android-arrow-dropright-circle');			<!-- next-circle --> 
		$('.more-btn').addClass('next-play-circle');			<!-- next-circle --> 
		}
				
		//select icons desktop
		//else { 
		//$('.owl-carousel, #poc').find('.textoverlay, .textoverlay-desktop').not('.ignore').prepend('<div class="ion-android-add-circle big more-icon"></div>');;
		//}

		<!-- HIDE  -->

		//hide scroll-icon on scroll
	  $('.scrolldown-container').on('touchstart scroll',function(){
		$(this).find('.scroll-down').addClass('invisible');			
	  });

		$('.hide-on-click').on('touchstart scroll',function(){
		
		var el = $(this);
		
		el.addClass('fadeOut animated-medium');
		
		setTimeout(
		  function() 
		  {
		el.addClass('invisible');
		  }, 500);							
	  });
	  
		<!-- SHOW -->	
		
		$(".show-shaded").on("click", function() {
		iframe = $(this).closest('.iframe-container').find('.showonclick').first();			
		iframe.attr("src", iframe.data("src"));
		$(this).closest('.iframe-container').find('.model-controls').removeClass('invisible');
		//alert(iframe);
		$(this).closest('.iframe-container').find(".hide-this").addClass('hidden');	 
		});



		</script>
									
		<!-- touch and desktop hidden  -->
		<script>
		if(is_touch_device()) {
			$('.touch-hidden').addClass('hidden');
		}
		else
		{ 
		$('.desktop-hidden').addClass('hidden');			
		}
		</script>
		
		<!-- textoverlay  -->
		<script>
		
		if(is_touch_device()) {
		var overlayClasses = $('.textoverlay, .textoverlay-mobile');	
		overlayClasses.on('touchstart touchend',function(){						
		$(this).find('img').not('.nofade').toggleClass('half img-opacity');
		$(this).find('.overlay').toggleClass('img-opacity');
		$(this).find('.text-animate').toggleClass('remove-margin');
		});		
		}
		else { 
		var overlayClasses = $('.textoverlay, .textoverlay-desktop');	
		overlayClasses.on('mouseenter mouseleave',function(){ 
		$(this).find('img').not('.nofade').toggleClass('half img-opacity');
		$(this).find('.overlay').toggleClass('img-opacity');
		$(this).find('.text-animate').toggleClass('remove-margin');
		});
		}	
		
		<!-- hide next button on touch  -->
		$('.owl-carousel').on('touchstart',function(){
		var viewBtn = $(this).closest('.slider-container').find('.view-btn');
		 viewBtn.addClass('invisible');
		});
		$('.owl-carousel').on('touchend',function(){
		var viewBtn = $(this).closest('.slider-container').find('.view-btn');
		 viewBtn.removeClass('invisible');
		});

		<!-- textoverlay-inverse  -->		

		if(is_touch_device()) {
		  $('.textoverlay-inverse').on('touchstart',function(){
			 $(this).find('.overlay').removeClass('img-opacity');
			 $(this).find('.overlay').addClass('invisible');
			 $(this).find('.text-animate').addClass('remove-margin');
		  });
			 $('.textoverlay-inverse').on('touchend',function(){
			 $(this).find('.overlay').addClass('img-opacity');
			  $(this).find('.overlay').removeClass('invisible');
			 $(this).find('.text-animate').removeClass('remove-margin');
		  });				
		}
		else
		{
		  $('.textoverlay-inverse').on('mouseenter',function(){
			 $(this).find('.overlay').removeClass('img-opacity');
			 $(this).find('.overlay').addClass('invisible');
			 $(this).find('.text-animate').addClass('remove-margin');
		  });
			 $('.textoverlay-inverse').on('mouseleave',function(){
			 $(this).find('.overlay').addClass('img-opacity');
			  $(this).find('.overlay').removeClass('invisible');
			 $(this).find('.text-animate').removeClass('remove-margin');
		  });			
		}			

		</script>		
				
		<!-- animations  -->	
		<script>
			
		if(is_touch_device()) { //animations touch devices

			//slider next button
			$('.more-btn, .next-play-circle').on('touchstart', function () {			
			$(this).removeClass("fade-in fadeIn element-animated zoomOutVisibleLarge animated-fast").addClass('zoomInVisibleLarge animated-fast'); //remove animate.css classes that are already there, or they will trigger again
			});
			$('.more-btn, .next-play-circle').on('touchend', function () {			
			$(this).addClass('zoomOutVisibleLarge animated-fast');
			});					
		}
		else //animations desktop
		{ 		
		  $('.info-icon').on('mouseenter',function(){
			 $(this).find('div').removeClass("flip-in-y flipInY element-animated").addClass("flipInY element-animated");  
		  });
			 $('.info-icon').on('mouseleave',function(){
			 $(this).find('div').removeClass("flipInY element-animated");
		  });
		  
		  $('.zoom-icon').on('mouseenter',function(){
			 $(this).addClass('info-icon-hover');
		  });
			 $('.zoom-icon').on('mouseleave',function(){
			 $(this).removeClass('info-icon-hover');
		  });
		  
		  $('.soft-zoom').on('mouseenter',function(){
			 $(this).removeClass("fade-in fadeIn element-animated zoomOutVisible animated-fast").addClass('zoomInVisible animated-fast'); //remove animate.css classes that are already there, or they will trigger again
		  });
			 $('.soft-zoom').on('mouseleave',function(){
			 $(this).addClass('zoomOutVisible animated-fast');
		  });
		}
		</script>

		<!-- iframes inject css & refresh -->
		<script>	
		  $('.ion-refresh').on('click',function(){
			iframe = $(this).closest('.iframe-container').find('iframe').first();
			iframe.attr('src', iframe.attr('src'));				
		  });
		  
			$('.ks-config, .config-auto').each(function() {
			 		
			//inject iframe styles & spinners
			$(this).on("load", function() {
			
			this_iframe = $(this);

			if (this_iframe.closest('.popup, .item').hasClass('dark-theme') || this_iframe.hasClass('dark-theme'))
			{
			themeclr ="dark";
			}
			else if (this_iframe.closest('.popup, .item').hasClass('light-theme') || this_iframe.hasClass('light-theme'))
			{
			themeclr ="light";
			}
			else if (this_iframe.closest('.popup, .item').hasClass('medium-theme') || this_iframe.hasClass('medium-theme'))
			{
			themeclr ="medium";
			}
			else {
			iframe_classes = $(this).attr('class');
			alert('no theme found for: ' +iframe_classes);
			}
			
		  let head = this_iframe.contents().find("head");	
		  let css = '<link type="text/css" rel="stylesheet" href="../../css/' + themeclr +'-theme.css">';
		  $(head).append(css);
		  this_iframe.addClass("visible");
		  //$('#' + brand + '-xr-popup').removeClass("loader");			  
		});
	});	
		</script>	
		
		<!-- background select -->
<!-- 		<script>
			//bg select buttons
			$('#' + brand + '-xr-popup #bg-button').click(function(){
				 $('#' + brand + '-xr-popup').removeClass("dark-theme light-theme medium-theme").addClass("dark-theme");
			});
			$('#' + brand + '-xr-popup #bg-button2').click(function(){
				 $('#' + brand + '-xr-popup').removeClass("dark-theme light-theme medium-theme").addClass("light-theme");
			});
			$('#' + brand + '-xr-popup #bg-button3').click(function(){
				 $('#' + brand + '-xr-popup').removeClass("dark-theme light-theme medium-theme").addClass("medium-theme");
			});				  		
			});
									
		</script> -->
				
		<!-- magnific -->		
		<script>
	
			let magnificPopupExists = false;

			$('.open-popup').magnificPopup({	
				type:'inline',
				fixedContentPos: true,
				fixedBgPos: true,
				callbacks: {
					beforeOpen: function() {		
				
						$('html, body').addClass('mfp-active');
						
					},
					beforeClose: function() {
						$('html, body').removeClass('mfp-active');								
					},			
					open: function() {
						magnificPopupExists = true;
						 //$('html, body').animate({ scrollTop: 50px }, 50);
						 // Getting the height of the document
						 let this_href = this.st.el.attr('href');
						if($(this_href).hasClass('webgl')) {  
						let this_href = this.st.el.attr('href'); 												
						let this_data_src = $(this_href).find('iframe').attr('data-src');
						
						console.log(this_href);
						console.log(this_data_src);
						
						$(this_href).find('iframe').attr('src', this_data_src).attr('data-src', '');
					}			

					},
					close: function() {
						magnificPopupExists = false;

						let this_href = this.st.el.attr('href');	
						console.log(this_href);				

						//let this_src = $(this_href).find('iframe').attr('src');
						//console.log(this_src);
						//$(this_href).find('iframe').attr('src','').attr('data-src', this_src); //.removeAttr('data-ll-status')	
						
						if($(this_href).hasClass('webgl')) { 
						console.log('has class webgl');
						let this_src = $(this_href).find('iframe').attr('src');
						//console.log(this_src);
						$(this_href).find('iframe').attr('src','').attr('data-src', this_src); //.removeAttr('data-ll-status')
						}
						else {
						console.log('error');
						}						
						
						if(this_href == '#keyshot-video-popup') { 
							$('#keyshot-video').attr('src', "");
						}
						
						//let this_src = $(this_href).find('iframe').attr('src');
						//console.log(this_src);
						
						
						
						//$(this_href).find('iframe').attr('data-src',);
						//$(this_href).find('iframe').attr('src','')

					//exit fullscreen on close popup
					 var docElm = document.documentElement;

						  if (document.exitFullscreen) {
								document.exitFullscreen();
						  } else if (document.webkitExitFullscreen) {
								document.webkitExitFullscreen();
						  } else if (document.mozCancelFullScreen) {
								document.mozCancelFullScreen();
						  } else if (document.msExitFullscreen) {
								document.msExitFullscreen();
						  }

						
					}		
				}		
			});

		</script>

		<!-- tooltips -->
		<script>	
		
		$(".info-icon").hover(function(e) {
			
			var tool_tip = $(this).data("tooltip");
			var addTheme;			
			
			<!-- variables -->
			if ($(this).parents().hasClass('popup')) {
			var el = $(this).closest('.popup');
			var this_container = $(this).closest('.popup');
			}
			else {
			var el = $(this).closest('.brand-section').find('.splide__slide.is-active');
			var this_container = $(this).closest('.brand-section').find('.splide-slider');
			var checkContainer = 'slider';
			}
						
			<!-- define tooltip colors			 -->
			if(el.hasClass("pop-theme")) {
			addTheme = 'pop';
			}
			else if(el.hasClass("dark-theme")) {
			addTheme = 'dark';
			}
			else if(el.hasClass("light-theme")) { 
			addTheme = 'light';
			}
			else if(el.hasClass("medium-theme")) { 
			addTheme = 'medium';
			}
			else if (checkContainer == 'slider') { 
				if (this_container.hasClass("pop-theme")) {
				addTheme = 'pop';
				}
				else if(this_container.hasClass("dark-theme")) {
				addTheme = 'dark';
				}
				else if(this_container.hasClass("light-theme")) {
				addTheme = 'light';
				}
				else if(this_container.hasClass("medium-theme")) {
				addTheme = 'medium';
				}
				console.log('added fallback theme from container');
			}		
			else
			{ 
			alert('error');
			};
						
			this_container.prepend($(tool_tip)).find($(tool_tip)).addClass('tooltip-position').addClass(addTheme).removeClass('hidden').css({
				'height': '100%',
				'width': '100%',
				//backgroundColor: bgcolor,
				//color: textcolor,		
			}).stop().show(100);

			
			//enables closing of the infobox on mobile as this is a hoverfunction
			if(is_touch_device()) {
			this_container.find('.tooltip-position').css( 'pointer-events', 'auto' ) 
			 }				
			
			}, function() {
			$($(this).data("tooltip")).addClass('hidden').removeClass('pop dark light medium');				
			});	
	
		</script>
					
	

		<!-- pdf viewer full height on click -->
<!-- 		<script>
		if(window.innerHeight > window.innerWidth){
			$('#spotify-process-popup .slide, #poc-process-popup .slide').on('click', function() {
			 
			//var container = $('#spotify-process-popup .viewer');
			var container = $(this).closest('.viewer');
			var top = $(this).position().top,
			currentScroll = container.scrollTop();

			 container.animate({
				  scrollTop: currentScroll + top
			 }, 1000);

			$(this).toggleClass('run').toggleClass('overflow-x-scroll');
			$(this).find('img').toggleClass('w-auto');
			
			});
		}
		</script> -->

		<script>	

			//inject iframe styles & spinners
		if(!is_touch_device()) {
					
			$(".babba").on("load", function() {

			  let head = $(this).contents().find("head");	
			  let col_one = $(this).contents().find("#one");	
			  let css_col = '<div id="cmf-text-box touch-hidden"><h2 class="mb-4 s-t">CMF <strong>Bundle</strong></h2><p>Lastly, when all changes and iterations are agreed upon, I can create an interactive bundle of color, material and finish options for you where you may explore different options yourself!</p><p>Try it out in the example below by selecting different cmf swatches for different part.</p></div>';
			  $(col_one).prepend(css_col);			
				$(this).contents().find("h3").remove();										  
			
			});
		}							
		</script>
		
		<!-- console logs -->
		<script>
		//console.log('03');
		</script>
	</body>
</html>	